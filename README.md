# client_orders
Тестовое задание для ООО "Милленниум - командировочные решения"

## Задание
1. В zip архиве находится MySQL дамп.
1) Распаковать архив и залить дамп в БД.
Написать код, который реализует взаимодействие клиент-сервер.
Получить из GET параметра ID клиентов и сделать выборку из базы в которой будет ФИО клиента и его заказы с товарами отсортированные по полю title в алфавитном порядке и по цене по убыванию.
Сформировать из этих данных JSON и сделать вывод на HTML странице. Соединение между клиентом и сервером реализовывать необязательно. В ответ прислать PHP, JS, HTML, который получился. Код нужно написать без использования PHP фреймворков и сторонних библиотек. При обработке параметров и данных использовать все необходимые меры безопасности, как в реальных условиях. 

2) Написать код PHP, в котором нужно от клиента принять данные по товарам и записывають их в таблицу products в виде нескольких записей.

3) Посмотрите на таблицы в БД, как можно их улучшить, и если можно, оптимизировать с учетом того, что в реальных условиях такие таблицы могут иметь большие размеры. Пришлите DDL модифицированных таблиц.
Опишите, что было изменено в таблицах, и с какой целью.

2. Ниже представлена иерархия классов. Какой прием ООП применяется при вызове метода go()?
```php
abstract class Car
{
    abstract function go();
}
```

```php
class RaceCar extends Car{
    public function go()
    {
        return '280 km/h';
    }
}
```

```php
class Track extends  Car{
    public function go()
    {
        return '80 km/h';
    }
}
```

```php
$queue = [];
$queue[] = new Track();
$queue[]  = new RaceCar();

foreach($queue as $row){
    echo $row->go();
}
```

3. В чем отличие SQL от MySQL?

4. Сделайте реализацию паттерна Singelton. Посмотрите, можно ли его применить в первом задании.

## Ответы.
1. Выполненное задание находится в этом репозитории.
1) Код в репозитории.
2) Код в репозитории.
3) Оптимизация SQL-таблиц:
- Таблица products:
	* Добавить индекс на поле title для улучшения производительности поиска по этому полю.
	* Добавить индекс на поле price для ускорения операций сортировки по цене.
    * Оптимизированная DDL:
    ```sql
    CREATE TABLE products (
        id INT AUTO_INCREMENT PRIMARY KEY,
        title VARCHAR(255) CHARACTER SET utf8mb4 NULL,
        price DECIMAL(10, 2) NULL,
        INDEX idx_title (title),
        INDEX idx_price (price)
    );
    ```
- Таблица user:
	* Добавить индекс на поля first_name и second_name для ускорения поиска по ФИО.
    * Оптимизированная DDL:
    ```sql
    CREATE TABLE user (
        id INT AUTO_INCREMENT PRIMARY KEY,
        first_name VARCHAR(255) CHARACTER SET utf8mb4 NULL,
        second_name VARCHAR(255) CHARACTER SET utf8mb4 NULL,
        birthday DATE NULL,
        created_at DATETIME NULL,
        INDEX idx_first_name (first_name),
        INDEX idx_second_name (second_name)
    );
    ```

- Таблица user_order:
    * Добавить составной индекс на поля user_id и product_id для ускорения объединений таблиц.
    * Оптимизированная DDL:
    ```sql
    CREATE TABLE user (
        id INT AUTO_INCREMENT PRIMARY KEY,
        first_name VARCHAR(255) CHARACTER SET utf8mb4 NULL,
        second_name VARCHAR(255) CHARACTER SET utf8mb4 NULL,
        birthday DATE NULL,
        created_at DATETIME NULL,
        INDEX idx_first_name (first_name),
        INDEX idx_second_name (second_name)
    );
    ```

2. В предложенной иерархии классов используется полиморфизм (истинный). Это прием ООП, при котором метод go() вызывается для объектов разных классов, реализующих собственную версию метода. В зависимости от типа объекта (RaceCar или Track), вызывается соответствующая реализация метода go().
ЗЫ: Я бы еще порекомендовал переименовать класс Track -> Truck, если имеется в виду грузовик.

3. Это две разные сущности.
- SQL — это язык запросов, используемый для работы с базами данных. Он является стандартом, поддерживаемым большинством СУБД.
- MySQL — это конкретная СУБД, которая использует диалект SQL для выполнения операций с базой данных. Это программное обеспечение, реализующее хранение и управление данными с помощью SQL.

4. В первом задании паттерн Singleton был применен для создания единственного экземпляра подключения к БД, чтобы избежать открытия новых соединений при каждом запросе.